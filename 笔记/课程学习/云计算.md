# **云计算**

# 一、云计算基础

## 3.理解云计算

### 3.1起源

#### 3.1.1简要历史

[云计算的发家史](https://zhuanlan.zhihu.com/p/396799868)

三巨头：亚马逊，谷歌，微软

#### 3.1.2定义

云计算是分布式计算的一种特殊形式，它引入效用模型远程供给**可扩展**和**可测量**的资源。

#### 3.1.3商业驱动力

- 动态满足IT资源需求发展需要；
- 降低IT资源使用成本；
- IT资源灵活适应组织变化需要；

#### 3.1.4技术创新

- 集群（Cluster）

- 网格计算（Grid Computing）

- 虚拟化（Virtualization）

- 其它

  - 宽带互联网

  - 数据中心

  - Web

  - Service

  - 多租户

### 3.2基本概念和术语

#### 3.2.1云

云代表Internet

云计算机中的"云"表示独特的**IT环境**，其设计目的是提供**可扩展**和**可测量**的**IT资源**；

#### 3.2.2 IT资源

IT资源指硬件或软件（包括数据），可以是物理（实体）的，也可以说虚拟（模拟）的；

![image-20220605161912434](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605161912434.png)

#### 3.2.3企业内部的

- 企业内部的（on-premise)
  - 指企业边界内的IT的资源
  - 具有可控性
- 内外部可以访问、调用、互操作
- 内外部可以相互迁移
- 可以冗余部署在内外部

#### 3.2.4云用户与云提供者

云提供者：以云计算形式提供IT资源的一方

云用户：使用云资源的一方

#### 3.2.5可扩展性

水平拓展

- 分配资源，向外扩展（增加服务器个数）
- 释放资源，向内扩展

垂直扩展

- 向上扩展，用更大容量资源代替
- 向下扩展，用更小容量资源代替

水平拓展和垂直拓展对比

![image-20220605162623418](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605162623418.png)

#### 3.2.6云服务

云服务指任何可以远程访问的**云端IT资源**。

#### 3.2.7云服务用户

- 云服务用户是**运行时**角色，由访问云服务的**软件程序**担任。
- 类型
  - 软件程序、服务
  - 工作站、便携机、移动设备

### 3.3目标与收益

- 降低投资与成比例的成本
- 提高可拓展性
- 提高的可用性和可靠性

### 3.4风险与挑战

- 增加的安全漏洞
- 降低的运营管控
- 云提供者间有限的可移植性
- 多地区合规问题

## 4.基本概念与模型

### 4.1角色与边界

#### 4.1.1云提供者

云提供者：以云计算形式提供IT资源的组织机构

责任

- 提供符合SLA（Service-Level Agreement）的云服务
- 管理职责，保证合规

#### 4.1.2云用户

云用户：与云提供者签订合同使用其提供的IT资源的个人或机构。

云用户使用云服务用户来访问云服务。

两者之间的关系图：

![image-20220605165212623](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605165212623.png)

#### 4.1.3云服务的拥有者

云服务拥有者

- 云用户
- 云提供者（自有云服务）

![image-20220605172559163](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605172559163.png)

#### 4.1.4云资源管理者

云资源管理者是负责管理基于云的IT资源的人或组织。云资源管理者可以说云服务所属的云的云用户或云提供者的。还可以是签订了合约来管理基于云的IT资源的第三方组织。

#### ![image-20220605165759898](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605165759898.png)	![image-20220605165855140](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605165855140.png)



#### 4.1.5其他角色

云审计者：对云环境进行独立评估的第三方。典型责任包括安全控制评估、隐私影响以及性能评估。这一角色的主要目的是提供对云环境的公平评价，帮助加强云用户与云提供者之间的信任关系。

云代理：这个角色要承担管理和协商云用户和云提供者之间云服务使用的责任。云代理提供的仲裁服务包括服务调节、聚合和仲裁。

云运营商：负者提供云用户和云提供者之间的线路级连接。这个角色通常由网络和电信提供商担任。

#### 4.1.6组织边界

组织边界是一个物理范围，包括由一家组织拥有和管理的IT资源的集合。组织边界不表示组织实际的边界，只是该组织的IT资产和IT资源。

![image-20220605170656319](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605170656319.png)		



#### 4.1.7信任边界

![image-20220605170730383](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605170730383.png)	

### 4.2云特性

- 按需使用
- 泛在接入
- 多租户
- 弹性
- 可测量的使用
- 可恢复性

### 4.3云交付模型

#### 4.3.1基础设施作为服务（IaaS)

- 提供以基础设施为中心的IT资源（CPU、内存、硬盘、网络等）
- 通过基于云服务的接口或工具访问资源
- 资源是虚拟化的
- 云用户对资源完全控制，自主管理

![image-20220605171202486](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605171202486.png)	

#### 4.3.2平台作为服务（PaaS）

PaaS

- 已经配置好的IT资源，是就绪可用（ready-to use）环境。
- 包括全生命周期工具。

特点

- 免去维护裸设备的负担
- 云用户的控制级别较低![image-20220605171351044](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605171351044.png)

#### 4.3.3软件作为服务（SaaS）

SaaS

- 以云服务形式提供软件程序
- 作为产品或通用工具提供

特点

- 云用户管理权限非常有限
- 可能是嵌套的云计算环境

![image-20220605171537915](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605171537915.png)	



#### 4.3.4云交付模型的比较

![image-20220605171622810](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605171622810.png)

#### 4.3.5云交付模型组合

- IaaS + PaaS
- IaaS + PaaS + SaaS

![image-20220605171825860](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605171825860.png)

![image-20220605171925149](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605171925149.png)

![image-20220605171937745](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605171937745.png)

### 4.4云部署模型

#### 4.4.1公有云

公有云：由**第三方云提供者**拥有的可**公共访问**的**云环境**。

![image-20220605172114751](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605172114751.png)

#### 4.4.2社区云

社区云：类似公有云，但对其的访问限制在特定的云用户社区。

![image-20220605172235064](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605172235064.png)

#### 4.4.3私有云

- 由一家组织单独拥有
- 属于企业内部的，具有高可管控性
- 一些安全问题和挑战不存在

![image-20220605172306886](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605172306886.png)

#### 4.4.4混合云

由多个不同云部署模型组合而成

![image-20220605172351834](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605172351834.png)

#### 4.4.5其它云部署模型

虚拟私有云（virtual private cloud）

- dedicated cloud，hosted cloud，托管专用云环境。

互联云（inter-cloud）

- 多个云连接组成

### 4.5小结

1.云计算环境中的角色主要包括云提供者、云用户、云服务拥有者、云管理者；

2.云具有按需使用、多租户、弹性、可测量的特点；

3.云主要的交付模型有IaaS、PaaS、SaaS；

4.云的部署模型主要有公有云、社区云和私有云。

## 5.云使能技术

### 5.1宽带网络和Internet架构

- 服务提供者（ISP）
- 无连接分组交换（数据报网络）
- 基于路由器的互联
- 技术和商业考量

### 5.2数据中心技术

#### 5.2.1虚拟化

#### ![image-20220605173042215](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605173042215.png)	5.2.2标准化与模块化

数据中心有什么性质：

- 标准化商用硬件
- 模块化结构设计
- 可扩展
- 容易更换
- 经济性

#### 5.2.3自动化

类型：

- 配置自动化
- 监控自动化
- 升级自动化
- 恢复自动化

#### 5.2.4远程操作与管理

方式：

- 远程桌面
- SSH （Secure Shell）*SSH* 为建立在应用层基础上的安全协议。
- 远程维护管理系统

#### 5.2.5高可用性

只有冗余技术

- 冗余
  - 电源
  - 布线
  - 环控
  - 集群
    - 数据冗余
    - 计算冗余
    - 负载均衡

#### 5.2.6安全感知的设计、操作和管理

- 安全要求高
- 访问控制严

#### 5.2.7配套设施

- 电源
- 布线
- 环控
- 消防
- 专门系统
  - 包括计算、存储网络等

#### 5.2.8计算硬件

- 机架式服务器
- 不同架构处理器X86、RISC  （CPU架构是[CPU](https://baike.baidu.com/item/CPU/120556)厂商给属于同一系列的CPU产品定的一个规范，主要目的是为了区分不同类型CPU的重要标示）
- 高密度处理单元
- 冗余热插拔组件

#### 5.2.9存储硬件

- 磁盘阵列
- I/O高速缓存
- 热插拔硬盘
- 快速数据复制
- 存储虚拟化

#### 5.2.10网络硬件

- 外网
- 负载均衡网络
- LAN光网络
- SAN光网络
- NAS网关（*网关(Gateway)又称网间连接器、协议转换器*）

### 5.3虚拟化技术

#### 5.3.1硬件无关性

虚拟要对硬件进行：

- 转换
- 仿真

#### 5.3.2服务器整合

- 多台虚拟机整合、共享一台硬件服务器。
- 提供硬件利用率
- 提供灵活性
- 是云计算的基础

#### 5.3.3资源复制

通过复制文件来复制机器

- 创建标准虚拟机
- 迁移部署灵活
- 支持回滚
- 高效备份恢复

#### 5.3.4基于操作系统的虚拟化

- 在一个操作系统管理下，通过虚拟化软件实现虚拟化。
- 虚拟机以普通应用的形式运行在宿主机操作系统之上。
- 优点：可以使用宿主机操作系统的一些功能。
- 缺点：多层结构的性能损失。

![image-20220605180320605](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605180320605.png)

#### 5.3.5基于硬件的虚拟化

- 虚拟化软件（虚拟机管理程序Hypervisor）直接安装在物理机上。
- 优点：性能高
- 缺点：兼容性问题

![image-20220605180349917](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605180349917.png)

#### 5.3.6虚拟化管理

虚拟化基础设施管理VIM（Virtualization Infrastructure Management）

集中统一管理

#### 5.3.7其他考量

- 虚拟化会增加开销，不是所有情况都适合虚拟化。
- 硬件兼容性问题存在
- 移植兼容问题存在

### 5.4Web技术

#### 5.4.1基本Web技术

组成

- URL(Uniform Resource Locator)
- HTTP(Hypertext Transfer Protocol)
- HTML(Hypertext Markup Language)

组件

- Httpd， CGI/JSP/ASP/PHP等
- Browser，插件/控件/Javascript等
- Tcp/ip网络

#### 5.4.2 Web应用

![image-20220605180612144](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605180612144.png)

### 5.5多租户技术

要解决好共享与隔离的问题。

共享

- 公共程序
- 公共模型
- 公共配置
- 公共数据

隔离

- 用户自定义配置
- 用户数据
- 用户行为
- 计费

![image-20220605180733105](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605180733105.png)	

### 5.6服务技术

#### 5.6.1 Web服务

包括

- WSDL（Web Service Description Language）
- XML模式描述语言（XML schema definition language）
- SOAP（Simple Object Access Protocol）
- UDDI（Universal Description, Discovery and Integration）

![image-20220605181021228](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605181021228.png)

#### 5.6.2 REST服务

- REST（Representational State Transfer）是一种**软件架构风格**，是一种针对网络应用的**设计和开发方式**，可以**降低开发的复杂性**，提高系统的**可伸缩性**。
- REST是一组**架构约束条件和原则**，满足这些约束条件和原则的**应用程序或设计**就是RESTful。
- 在RESTful HTTP方式中，通过组成HTTP应用协议的**通用接口**访问服务程序，也就是使用标准的GET、PUT、POST和DELETE方法。

#### 5.6.3服务代理

拦截信息并处理

分类

- 主动代理
- 被动代理

#### 5.6.4服务中间件

中间件是介于应用系统和系统软件之间的一类软件，它使用系统软件所提供的基础服务（功能），衔接网络上应用系统的各个部分或不同的应用，能够达到资源共享、功能共享的目的。

MOM（Message Oriented Middleware）
ESB（Enterprise Service Bus）
必备功能

- 路由
- 协议桥接
- 消息转换
- 服务代理托管

ESB扩展功能

- 资源适配器
- 可靠的消息传递
- 事件处理
- 交易的完整性管理
- 消息格式调解
- 负载均衡
- 消息验证
- 能力调解

### 5.7小结

1.Internet是云计算的必要条件之一，宽带网络为云计算的集中模式提供了网络访问保障；

2.数据中心技术为云计算的集中模式提供了基础设施保障；

3.虚拟化技术为云计算的服务整合和资源复制提供了技术基础；

4.Web及服务技术为云计算的互操作与普适访问提供了技术基础；

5.多租户技术使云计算的管理和经济效益得以实现。

所有的云必须连接到网络，同时利用数据中心技术集中存放IT资源，应用虚拟化技术将物理IT资源转换为虚拟IT资源，从而提供了硬件无关性、服务器整合、资源复制、对资源更强的支持和可扩展性；使用Web技术作为云服务的实现介值和管理接口；设计多租户技术使多个用户在逻辑上同时访问一个应用；其中的服务技术是云计算的基石，形成了“作为服务”的云交付模型的基础。

## 6.基本云安全

### 6.1基本术语和概念

#### 6.1.1保密性（Confidentiality）

![image-20220605193621391](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605193621391.png)

#### 6.1.2完整性（Integrity）

![image-20220605193713155](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605193713155.png)

#### 6.1.3真实性（Authenticity）

![image-20220605193732386](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605193732386.png)

#### 6.1.4可用性（Availability）

![image-20220605193930893](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605193930893.png)

#### 6.1.5威胁

![image-20220605194035113](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194035113.png)

#### 6.1.6漏洞

![image-20220605194114275](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194114275.png)

#### 6.1.7风险

![image-20220605194128845](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194128845.png)

#### 6.1.8安全控制

![image-20220605194155429](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194155429.png)

#### 6.1.9安全机制

构成保护IT资源、信息和服务的防御框架的组成部分。

#### 6.1.10安全策略

是一套安全规则和规章，以及如何加强和实现这些规则和规章的方法。

### 6.2威胁作用者

![image-20220605194336580](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194336580.png)

#### 6.2.1匿名攻击者

![image-20220605194427298](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194427298.png)

#### 6.2.2恶意服务作用者

![image-20220605194521936](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194521936.png)

#### 6.2.3授信的攻击者

![image-20220605194558031](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194558031.png)

![image-20220605194606732](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194606732.png)

#### 6.2.4恶意的内部人员

![image-20220605194612835](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194612835.png)

### 6.3云安全威胁

#### 6.3.1流量窃听

![image-20220605194813559](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194813559.png)

#### 6.3.2恶意媒介

![image-20220605194857633](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194857633.png)

#### 6.3.3拒绝服务

![image-20220605194935548](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605194935548.png)

#### 6.3.4授权不足（Insufficient Authorization）

![image-20220605195036118](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195036118.png)

![image-20220605195042835](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195042835.png)

![image-20220605195054624](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195054624.png)![image-20220605195054494](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195054494.png)

#### 6.3.5虚拟化攻击

![image-20220605195101013](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195101013.png)

#### 6.3.6信任边界重叠

![image-20220605195108097](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195108097.png)

### 6.4其他考量

#### 6.4.1有缺陷的实现

![image-20220605195129391](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195129391.png)

#### 6.4.2安全策略不一致

- 云服务提供者的安全策略和机制与云用户的要求可能不一致，不兼容。
- 云服务提供者者是真正的安全控制者。
- 安全第三方问题。

#### 6.4.3合约

![image-20220605195145299](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195145299.png)

#### 6.4.4风险管理

![image-20220605195153699](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605195153699.png)

### 6.5小结

1.机密、完整、可用（CIA）是云安全的基本要求。

2.威胁是伴随云资源价值的客观存在，云计算的漏洞将使云计算在安全威胁下面临安全风险，威胁方利用漏洞即可实施攻击。

3.安全策略定义安全规则；安全机制是具体的安全技术和措施，实现安全规则。

4.云计算的攻击者可能是内部人员、授信人员、恶意用户、匿名者。

5.云计算的安全威胁包括流量窃听、恶意媒介（数据篡改）、拒绝服务、授权不足（控制不足）、虚拟化攻击、信任边界重叠等。

6.使用云计算要做好风险管理。

# 二、云计算机机制

## 7.云基础设施机制

### 7.1逻辑网络边界

#### 7.1.1 逻辑边界的功能

逻辑隔离IT资源

- 与非授权用户
- 与非用户
- 与云用户
- 超额带宽

#### 7.1.2 逻辑网络边界的形式

虚拟防火墙

虚拟网络

![image-20220605200625545](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605200625545.png)

![image-20220605200632283](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605200632283.png)

#### 7.1.3 逻辑网络边界例子

通过防火墙构建虚拟网络边界

![image-20220605200601091](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605200601091.png)

### 7.2虚拟服务器

#### 7.2.1 虚拟服务器功能

提供服务器实例

![image-20220605200729854](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605200729854.png)	

![image-20220605200741094](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605200741094.png)	

#### 7.2.2 虚拟服务器实现技术

虚拟化平台

![image-20220605200755002](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605200755002.png)

#### 7.2.2 虚拟服务器环境实例

![image-20220605200812156](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605200812156.png)

### 7.3云存储设备

#### 7.3.1云存储等级

![image-20220605200856089](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605200856089.png)

#### 7.3.2网络存储接口

- 块：iSCSI、FC、FCoE(Fibre Channel over Ethernet)、LUN(Logical Unit Number)
- 文件：NFS、CIFS(Common Internet File System)、SMB(Server Message Block)
- 对象： CDMI (The Cloud Data Management Interface )
- 数据集：DBMS

#### 7.3.3对象存储接口

- CDMI（Cloud Data Management Interface）为云存储定义了数据管理接口规范，云端任何数据都可作为对象存取。
- CDMI 在所有可能的设计处使用了 Restful 原理。

#### 7.3.4数据库存储接口

- 关系数据库
  - ODBC
  - JDBC
  - OLE DB
  - CLI
- 非关系数据库
  - API

#### 7.3.5云存储案例

- 存储软件

![image-20220605201255392](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605201255392.png)

- 虚拟服务器

![image-20220605201303483](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605201303483.png)

### 7.4云使用监控

#### 7.4.1监控代理

![image-20220605201640053](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605201640053.png)

#### 7.4.2资源代理

![image-20220605201751494](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605201751494.png)

#### 7.4.3轮询代理

![image-20220605201825166](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605201825166.png)

### 7.5资源复制

![image-20220605201923279](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605201923279.png)

### 7.6已就绪环境

![image-20220605202158218](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605202158218.png)	![image-20220605202351539](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605202351539.png)

### 7.7小结

1.网络虚拟化是隔离、监控、计费的基础；

2.服务器虚拟化是多租户支持的基础；

3.基于REST的CDMI是云存储的关键技术；

4.监控代理监控网络访问，资源代理监控资源请求，轮询代理监控资源状态；

5.资源复制是容错和快速部署的基础。

## 8.特殊云机制

### 8.1 自动伸缩监听器

#### 8.1.1自动伸缩监听器作用

- 作用
  - 监控和追踪云服务用户和云服务间通信，据此进行自动伸缩。
- 响应类型
  - 根据定义自动伸缩（Auto-scaling）
  - 超限时通知云用户

#### 8.1.2自动伸缩监听器示例

![image-20220605213648079](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605213648079.png)

![image-20220605213728519](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605213728519.png)

![image-20220605213928213](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605213928213.png)

#### ![image-20220605213951917](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605213951917.png)

### 8.2 负载均衡器

#### 8.2.1 负载均衡器作用

- 作用
  - 在多个IT资源上分配负载，提升性能和容量。
- 分配算法
  - 平均
  - 非对称
  - 负载优先级
  - 上下文感知
- 实现机制
  - 多层网络交换机
  - 专门硬件
  - 专门软件
  - 服务代理	

#### 8.2.2 负载均衡器示例

![image-20220605214119969](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214119969.png)

![image-20220605214158875](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214158875.png)

### 8.3 SLA监控器

#### 8.3.1 SLA监控器作用

- 作用
  - 观察云服务运行时性能，确保满足SLA中约定的QoS要求。
- 实现机制
  - 提供报告
  - 主动修复或转移故障云服务

#### 8.3.2 SLA监控器示例

![image-20220605214315295](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214315295.png)

![image-20220605214414573](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214414573.png)

![image-20220605214421739](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214421739.png)

#### 8.3.3 SLA的国家要求

公有云、社区云是国家基础设施

### 8.4 按使用付费监控器

#### 8.4.1 按使用付费监控器作用

- 作用
  - 按定价参数测量IT资源使用，生成日志用于计费。
- 典型定价参数
  - 消息数量
  - 数据量
  - 带宽消耗
  - 计算量
  - 时长

#### 8.4.2 按使用付费监控器示例

![image-20220605214601876](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214601876.png)

![image-20220605214610785](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214610785.png)

![image-20220605214619705](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214619705.png)

![image-20220605214624995](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214624995.png)

### 8.5 审计监控器

#### 8.5.1 审计监控器作用

- 作用
  - 收集网络和IT资源审计记录，用于满足管理需要或合同义务。

#### 8.5.2 审计监控器示例

![image-20220605214650083](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214650083.png)

![image-20220605214703644](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214703644.png)

### 8.6 故障转移系统

- 作用
  - 利用集群技术提供冗余来增加IT资源的可靠性和可用性。

#### 8.6.1主动-主动

![image-20220605214744290](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214744290.png)

![image-20220605214751720](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214751720.png)

![image-20220605214756441](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214756441.png)

#### 8.6.2主动-被动

![image-20220605214832426](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214832426.png)

![image-20220605214836531](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214836531.png)

![image-20220605214840387](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214840387.png)

![image-20220605214953343](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605214953343.png)

![image-20220605215045573](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215045573.png)

![image-20220605215133423](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215133423.png)

![image-20220605215145117](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215145117.png)

### 8.7 虚拟机监控器

#### 8.7.1 虚拟机监控器作用

- 作用
  - 虚拟机监控器（Hypervisor）在物理机上生成虚拟化实例。

![image-20220605215224684](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215224684.png)

#### 8.7.2 虚拟机监控器示例

![image-20220605215232239](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215232239.png)

![image-20220605215239402](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215239402.png)

### 8.8 资源集群

#### 8.8.1 资源集群作用

- 作用
  - 把分布的IT资源作为一组进行操作，以增加组织计算能力、负载均衡能力、可用性。
- 基本类型
  - 负载均衡集群（Load balance cluster）
  - 高可用集群（High availability cluster）
- 其它分类
  - 服务器集群
  - 数据库集群
  - 大数据集群

#### 8.8.2 资源集群示例

![image-20220605215406140](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215406140.png)

![image-20220605215412764](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215412764.png)

![image-20220605215418034](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215418034.png)

![image-20220605215422515](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215422515.png)

### 8.9 多设备代理

#### 8.9.1 多设备代理作用

- 作用
  - 在云服务前处理不用云服务用户的差异。
- 类型
  - XML网关
  - 云存储网关
  - 移动设备网关
- 可处理的内容
  - 传输协议
  - 消息协议
  - 存储设备协议
  - 数据模式/模型

#### 8.9.2 多设备代理示例

![image-20220605215623576](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215623576.png)

![image-20220605215653480](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215653480.png)

![image-20220605215709257](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605215709257.png)

### 8.10 状态管理数据库

#### 8.10.1 状态管理数据库作用

- 作用
  - 暂时持久化软件程序的状态数据，以增加基础设施可扩展性。

![image-20220605220114139](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605220114139.png)

![image-20220605220151927](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605220151927.png)

#### 8.10.2 状态管理数据库示例

![image-20220605220204444](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605220204444.png)

![image-20220605220209899](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605220209899.png)

### 8.11小结

1.自动伸缩监听器监控云服务访问情况并伸缩云服务；

2.负载均衡器在多云服务间分配访问请求；

3.SLA监控器收集SLA相关信息并报告；

4.按使用付费监控器按计费设置收集相关数据；

5.审计监控器按审计要求收集相关数据；

6.故障转移系统监视云服务故障并在故障时转移云服务；

7.虚拟机监控器在物理机上创建管理虚拟机实例；

8.资源集群实现IT资源组合以提供计算、负载、可用性的优化；

9.多设备代理处理访问设备的差异性；

10.状态管理数据库持久化软件状态，是自动伸缩、故障转移等的基础。

## 9.云管理机制

### 9.1远程管理系统

- 功能
  - 提供远程管理云端IT资源的界面和工具。
    - 使用与管理入口
    - 自助服务入口
- 组成

![image-20220605220644047](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605220644047.png)

- 远程管理架构
- 远程管理标准化

![image-20220605220729155](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605220729155.png)

- 配置与建立云服务
- 为按需云服务提供和释放资源
- 监控云服务的状态、使用和性能
- 监控QoS和SLA的实现情况
- 管理租用成本与使用费用
- 管理用户账户、安全凭证、授权和访问控制
- 跟踪对租赁服务内部与外部的访问
- 规划与评估IT资源供给
- 容量规划

远程管理标准化

- 自定义管理前端
- 管理多个云资源
- 重用

![image-20220605221104791](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221104791.png)

![image-20220605221308610](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221308610.png)

### 9.2资源管理系统

- 资源管理系统功能

  ![image-20220605221242659](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221242659.png)

- 资源管理系统访问形式

![image-20220605221253646](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221253646.png)

![image-20220605221321182](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221321182.png)

### 9.3SLA管理系统

- SLA管理系统功能
  功能：SLA数据的管理、收集、存储、报告及运行时通知。
  组成：![image-20220605221413900](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221413900.png)
- SLA管理系统结构

![image-20220605221441433](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221441433.png)

![image-20220605221447292](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221447292.png)

### 9.4计费管理系统

- 计费管理系统功能

​		功能：收集处理使用数据，据此进行计费和结算。

​		组成：![image-20220605221552845](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221552845.png)

- 计费管理系统架构

![image-20220605221605138](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221605138.png)

![image-20220605221613313](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221613313.png)

### 9.5小结

1.远程管理集系统成资源管理系统、SLA管理系统、计费管理系统等。

2.资源管理系统基于VIM实现资源管理。

3.SLA管理系统基于SLA监控代理实现管理功能。

4.计费管理系统基于按使用付费监控代理实现管理功能。

## 10.云安全机制

### 10.1加密

#### 10.1.1通信模型

![image-20220605221918401](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605221918401.png)

#### 10.1.2对称加密

- 功能
  - 用key加密的内容，必须用key才能解密
- 算法
  - DES、AES
  - SM1、SM4

#### 10.1.3非对称加密

- 功能
  - 密钥是公钥和私钥组成的一对key=（kp, ks）
  - 用kp加密的，必须用ks才能解密
  - 用ks加密（签名）的，必须用kp才能解密（验证）
- 算法
  - RSA
  - SM2

![image-20220605222107895](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222107895.png)

### 10.2哈希

- 功能
  - 从消息生成固定长度的消息摘要
  - 由摘要不可恢复出消息
- 算法
  - MD5、SHA-I、SHA-II等
  - SM3

![image-20220605222138516](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222138516.png)

![image-20220605222215821](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222215821.png)

### 10.3数字签名

- 功能
  - 计算消息摘要并用私钥对摘要加密（签名）
  - 可验证消息完整性
  - 可验证消息来源
- 算法
  - SHA+RSA
  - SM3+SM2

![image-20220605222300848](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222300848.png)

![image-20220605222306693](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222306693.png)

### 10.4公钥基础设施

- 功能
  - 用户注册RA
  - 证书签发CA
  - 证书吊销列表CRL

![image-20220605222328568](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222328568.png)

![image-20220605222339573](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222339573.png)

### 10.5身份与访问管理

![image-20220605222352825](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222352825.png)

![image-20220605222408948](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222408948.png)

![image-20220605222424069](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222424069.png)

### 10.6单一登录

![image-20220605222429408](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222429408.png)

![image-20220605222508805](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222508805.png)

![image-20220605222517278](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222517278.png)

![image-20220605222521531](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222521531.png)

### 10.7基于云的安全组

![image-20220605222527061](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222527061.png)

![image-20220605222547963](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222547963.png)

### 10.8强化的虚拟服务器映像

![image-20220605222632232](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222632232.png)

![image-20220605222637796](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605222637796.png)

### 10.9小结

1.加密可保证云环境中信息的机密性；

2.签名基于哈西和非对称加密，可保证云环境中信息的完整性，并可实现来源认证；

3.PKI管理证书及证书吊销列表，证书实现用户公钥与用户名的绑定；

4.https基于ssl/tls，ssl/tls基于数字证书，可实现客户端和服务器双向认证，并保证通信内容的机密性和完整性；

5.IAM实现云环境的用户及其授权管理，单一登录可以包含在IAM中；

6.安全分组是通过虚拟化分组实施安全隔离，是云安全的有效管理措施；

7.强化系服务器镜像将传统安全管理的有效措施引入到云计算基础设施环境。

# 三、云计算架构

## 11.基本云架构

### 11.1负载分布架构

通过负责均衡器分配工作负责

![image-20220605230402883](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230402883.png)

### 11.2资源池架构

把物理或虚拟的IT资源分组维护

![image-20220605230424931](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230424931.png)

![image-20220605230432897](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230432897.png)

![image-20220605230436186](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230436186.png)

![image-20220605230611831](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230611831.png)

![image-20220605230621830](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230621830.png)

### 11.3动态可扩展架构

- 按条件动态分配资源
  - 动态水平扩展
  - 动态垂直扩展
  - 动态重新定位

![image-20220605230712933](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230712933.png)

![image-20220605230718016](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230718016.png)

### 11.4弹性资源容量架构

支持虚拟服务器资源的动态变化要求

![image-20220605230754130](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230754130.png)

![image-20220605230759904](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230759904.png)

![image-20220605230804179](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230804179.png)

### 11.5服务负载均衡架构

负载分布架构的特殊情况（均衡分部负载）

![image-20220605230855770](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605230855770.png)



![image-20220605231053054](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231053054.png)

### 11.6云爆发架构

企业内部IT资源达到触发条件后扩展到云中

![image-20220605231108711](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231108711.png)

### 11.7弹性磁盘供给架构

支持按存储使用量收费

![image-20220605231138683](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231138683.png)

![image-20220605231144762](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231144762.png)

![image-20220605231150063](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231150063.png)

### 11.8冗余存储架构

通过存储容余实现容错

![image-20220605231218690](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231218690.png)

![image-20220605231224249](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231224249.png)

![image-20220605231230587](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231230587.png)

![image-20220605231233295](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231233295.png)

### 11.9小结

1.基本云架构是多数云计算环境需要的架构；

2.负载分布架构使用负载均衡器**分配**负载，负载均衡架构**平衡**负载；

3.资源池架构提供资源管理框架；

4.动态可扩展架构支持云服务扩展，弹性资源容量加架构支持资源容量扩展；

5.云爆发架构支持本地服务向云扩展；

6.弹性磁盘供给架构支持按需磁盘容量配置，冗余存储结构能够容错。

## 12.高级云架构

### 12.1虚拟机监控器集群架构

虚拟机监控器是云服务的关键

![image-20220605231912755](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605231912755.png)

![image-20220605232035375](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232035375.png)![image-20220605232046172](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232046172.png)	

### 12.2负载均衡的虚拟服务器实例架构

![image-20220605232052423](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232052423.png)

![image-20220605232057758](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232057758.png)

![image-20220605232103047](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232103047.png)

### 12.3不中断服务重定位架构

云服务运行时复制或迁移避免中断服务

![image-20220605232116321](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232116321.png)

![image-20220605232123577](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232123577.png)

![image-20220605232135718](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232135718.png)

### 12.4零宕机架构

![image-20220605232142937](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232142937.png)

### 12.5云负载均衡架构

![image-20220605232147483](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232147483.png)

### 12.6资源预留架构

![image-20220605232152415](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232152415.png)

![image-20220605232158451](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232158451.png)

![image-20220605232202444](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232202444.png)

### 12.7动态故障检测与恢复架构

![image-20220605232206649](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232206649.png)

![image-20220605232211830](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232211830.png)

### 12.8裸机供给架构

提供没有OS的服务器

![image-20220605232216036](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232216036.png)

![image-20220605232220789](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232220789.png)

### 12.9快速供给架构

![image-20220605232226019](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232226019.png)

![image-20220605232231303](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232231303.png)

### 12.10存储负载管理架构

使LUN均匀分布在云存储设备上

![image-20220605232235809](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232235809.png)

![image-20220605232238246](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232238246.png)

### 12.11小结

1.高级云架构主要是支持高可靠性；

2.虚拟机监控集群、负载均衡服务器实例、云负载均衡、存储负载管理架构通过集群和均衡技术支持高可靠性；

3.不中断服务、零宕机、动态故障检测与恢复架构通过自动伸缩、迁移、重配置等支持高可用性；

4.裸机供给架构提供操作系统级可控环境；

5.快速供给架构提供快速部署支持。

## 13.特殊云架构

### 13.1直接I/O访问架构

![image-20220605232553413](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232553413.png)

### 13.2直接LUN访问架构

![image-20220605232604810](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232604810.png)

### 13.3动态数据规范化架构

![image-20220605232610229](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232610229.png)

### 13.4弹性网络容量架构

动态分配额外网络带宽

![image-20220605232624946](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232624946.png)

### 13.5跨存储设备垂直分层架构

![image-20220605232630533](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232630533.png)

![image-20220605232638240](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232638240.png)

### 13.6存储设备内部垂直数据分层架构

![image-20220605232645517](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232645517.png)

### 13.7负载均衡的虚拟交换机架构

![image-20220605232651818](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232651818.png)

### 13.8多路径资源访问架构

![image-20220605232655827](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232655827.png)

### 13.9持久虚拟网络配置架构

![image-20220605232659648](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232659648.png)

![image-20220605232705055](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232705055.png)

### 13.10虚拟服务器的冗余物理连接架构

![image-20220605232712525](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232712525.png)

### 13.11存储维护窗口架构

![image-20220605232719403](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232719403.png)

![image-20220605232730593](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605232730593.png)

### 13.12小结

1.高级云架构支持一些特殊需求；

2.直接I/O支持高带宽/性能内容访问；

3.直接LUN支持块存储共享；

4.动态数据规范化可去除数据冗余；

5.弹性网络容量架构支持网络带宽额外分配；

6.存储设备垂直分层架构支持存储垂直扩展；

7.负载均衡的虚拟交换机架构支持网络容量扩展；

8.多路径资源访问架构支持故障容忍；

9.持久虚拟网络配置架构支持托管业务；

10.虚拟服务器的冗余物理连接架构支持故障容忍；

11.存储维护窗口架构支持维护期不间断服务；

# 四、使用云

## 14.云交付模型考量（交付）

### 14.1云交付模型：从云提供者的角度看

#### 14.1.1构建IaaS环境

- IaaS配置属性

  - 操作系统

  - 主存容量

  - 处理能力

  - 虚拟化存储容量
    - *裸机供给—物理资源直接访问

- 数据中心

  - 多数据中心增加弹性

  - 负载均衡、备份、复制、增加存储容量

  - 合规要求

  ![image-20220605233519225](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605233519225.png)

- 可扩展性和可靠性

  - 可扩展性

    - 垂直扩展与水平扩展

    - 手动扩展与自动扩展

  - 可靠性

    - 复制的IT资源

    - 虚拟高可用/高可靠集群

    - 冗余访问路径

    - 资源保留

- 监控

  - 虚拟服务器生命周期

  - 数据存储

  - 网络流量

  - 失效情况

  - 事件触发

- 安全

  - 加密、哈希、数值签名、PKI

  - IAM、SSO

  - 基于云的安全组

  - 强化虚拟服务器映像

  - 各种云使用监控器

#### 14.1.2装备PaaS环境

- 可扩展与可靠性

  - 可扩展性

    - 借助动态可扩展和工作负载分配架构

    - 基于自动扩展监听器和负载均衡器、资源池

  - 可靠性

    - 故障转移系统

    - 不中断服务架构

- 监控

  - 已就绪环境实例

  - 数据持久化

  - 网络使用

  - 失效情况

  - 事件触发器

- 安全
  - 使用IaaS安全机制

#### 14.1.3优化SaaS环境

- SaaS特性

  - 基于多租户环境

  - 基于动态可扩展、负载分配、不中断服务架构

  - 不同SaaS有其架构、功能、运行时要求

![image-20220605233741652](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605233741652.png)

- 实现媒介

  - 移动应用

  - REST服务

  - Web服务

- 架构模型

  - 服务负载均衡

  - 动态失效检测和恢复

  - 存储维护窗口

  - 弹性资源容量/弹性网络容量

  - 云负载均衡

- 监控

  - 租户订阅周期

  - 应用使用

  - 租户应用功能模块

  - 数据存储、网络流量、失效、事件触发

- 安全

  - 基于IaaS和PaaS

  - 按业务要求部署

### 14.2云交付模型：从云用户的角度看

#### 14.2.1使用IaaS环境

主机访问

- 远程桌面
- ssh

![image-20220605233947850](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605233947850.png)

存储访问

- 网络文件系统
  - NFS
  - CIFS
- 存储区域网
  - iSCSI
  - Fibre Channel
- 基于Web的资源

可控性

![image-20220605234010241](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234010241.png)

#### 14.2.2使用PaaS环境

- PaaS IDE
- 存储
  - SQL
  - NoSQL
- 可管理性

![image-20220605234051000](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234051000.png)

#### 14.2.3使用SaaS服务

- 阅读提供者合约了解云服务设计执行的非主要行为
- 用户自定义选项

![image-20220605234105002](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234105002.png)

### 14.3小结

1.云计算交付模型包括IaaS、PaaS、SaaS；

2.提供者关心能力、扩展性、不间断服务、安全、监控等。

3.使用者关心可访问性、可用性、可管理性、安全等。

## 15.成本指标与定价模型（成本）

### 15.1商业成本指标

#### 15.1.1前期成本与持续成本

![image-20220605234324693](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234324693.png)

#### 15.1.2附加成本

![image-20220605234330899](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234330899.png)

![image-20220605234337142](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234337142.png)

![image-20220605234346793](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234346793.png)

### 15.2云使用成本指标

#### 15.2.1网络使用

- 组成
  - 流入网络使用
  - 流出网络使用
  - 内部WAN使用
- 因素
  - 静态IP地址
  - 网络负载均衡
  - 虚拟防火墙

#### 15.2.2服务器使用

- 按需使用虚拟机
- 预留虚拟机

#### 15.2.3云存储设备使用

- 按需使用存储空间
- IO数据传输

#### 15.2.4云服务使用

- 应用订购持续时间
- 指定用户数量
- 用户事务数量

### 15.3成本管理考量

#### 15.3.1定价模型

- 综合定价模型

![image-20220605234453598](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234453598.png)

- 独立定价模型

![image-20220605234525863](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234525863.png)

#### 15.3.2其他考量

谈判
付款方式
成本档案

## 16.服务质量指标SLA(服务质量)

### 16.1 服务质量指标

#### 16.1.1 服务可用性指标

可用性比率

![image-20220605234714239](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234714239.png)

停用时间

![image-20220605234719010](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234719010.png)

#### 16.1.2 服务可靠性指标

平均故障间隔时间

![image-20220605234729827](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234729827.png)

可靠性比率

![image-20220605234733778](C:/Users/23893/AppData/Roaming/Typora/typora-user-images/image-20220605234733778.png)

#### 16.1.3 服务性能指标

- 网络容量
- 存储设备容量
- 服务器容量
- Web应用容量
- 实例启动时间
- 响应时间
- 完成时间

#### 16.1.4 服务可扩展性指标

- 存储可扩展性（水平）指标
- 服务器可扩展性（水平）指标
- 服务器可扩展性（垂直）指标

#### 16.1.5 服务弹性指标

- 平均切换时间
- 平均系统恢复时间

### 16.2 SLA指导准则

- 把服务案例映射到SLA
- 使用云和企业内部的SLA
- 理解SLA的范畴
- 理解SLA监控的范畴
- 以合适的粒度记录保证
- 记录不但能遵守保证条款的处罚
- 加入不可测量的要求
- 公开遵守性验证和管理
- 包括具体的指标计算公式
- 考虑独立的SLA监控
- 存档SLA数据
- 公开跨云的依赖关系